# Interceptors

<br>
<br>

En Angular, los interceptors son clases que te permiten interceptar y manipular las solicitudes HTTP y las respuestas antes de que lleguen al cliente o se envíen al servidor. Los interceptors son útiles para realizar acciones comunes en todas las solicitudes HTTP, como agregar encabezados, manejar errores, realizar transformaciones de datos y más, de una manera modular y reutilizable.

Los interceptors se pueden utilizar para una variedad de tareas, como:

1. **Añadir encabezados a las solicitudes HTTP**: Puedes agregar encabezados como tokens de autorización, información de autenticación u otros encabezados personalizados a todas las solicitudes salientes.

2. **Manipular respuestas**: Puedes procesar las respuestas antes de que lleguen al código que realiza la solicitud. Esto podría incluir el manejo de errores globales o el procesamiento de datos para una estructura uniforme.

3. **Cacheo**: Puedes implementar lógica para almacenar en caché ciertas respuestas y devolver respuestas almacenadas en caché en lugar de realizar solicitudes HTTP repetidas.

4. **Registro o seguimiento**: Puedes llevar un registro de las solicitudes y respuestas para fines de seguimiento o análisis.

5. **Transformación de datos**: Puedes modificar los datos en la solicitud o respuesta, como convertir fechas en un formato específico o realizar cálculos en los datos.

Para crear un interceptor en Angular, debes implementar la interfaz `HttpInterceptor` y proporcionar la lógica dentro del método `intercept()`.

Aquí hay un ejemplo de cómo podría ser un interceptor básico que agrega un encabezado de token de autorización a todas las solicitudes salientes:

```typescript
import { Injectable } from '@angular/core';
import { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable()
export class AuthInterceptor implements HttpInterceptor {

  constructor() {}

  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {
    const token = 'mi-token-de-autorizacion';
    
    // Clona la solicitud y agrega el encabezado de autorización
    const authRequest = request.clone({
      setHeaders: {
        Authorization: `Bearer ${token}`
      }
    });

    // Continúa con la solicitud
    return next.handle(authRequest);
  }
}
```

Para proporcionar este interceptor en tu aplicación, debes registrarlo en el módulo de tu aplicación en la sección de `providers`:

```typescript
import { NgModule } from '@angular/core';
import { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';
import { AuthInterceptor } from './auth.interceptor';

@NgModule({
  imports: [HttpClientModule],
  providers: [
    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }
  ]
})
export class MyModule { }
```
<br>
<br>

Este es solo un ejemplo de cómo puedes crear y utilizar un interceptor en Angular. Puedes crear múltiples interceptors y configurarlos para realizar diversas tareas de manipulación de solicitudes y respuestas según las necesidades de tu aplicación.

## 1. Crear Interceptor

![image](https://user-images.githubusercontent.com/31961588/171081753-62ca4aa6-1af6-4704-a413-929b8e58cd83.png)

![image](https://user-images.githubusercontent.com/31961588/171081878-91d737ad-80dd-42f8-ac21-a20c70a2f63d.png)

## 2. Configurar

![image](https://user-images.githubusercontent.com/31961588/171082325-798c8052-46fe-4fbe-9872-29fcfa945f66.png)

![image](https://user-images.githubusercontent.com/31961588/171082537-068ae072-03ab-47ec-bdf1-710d4ca95742.png)

<details><summary>Mostrar código</summary>

<p>   
    
```typescript


```

</p>
</details>

## Configuración de app-routing

![image](https://user-images.githubusercontent.com/31961588/171085148-eb06bc82-03e4-467c-9b15-4cef868ca9fd.png)

## Configuración del app.module

![image](https://user-images.githubusercontent.com/31961588/171085263-29bd4e52-1621-4d86-8e97-2b731569f29f.png)

![image](https://user-images.githubusercontent.com/31961588/171085397-6e8fbea4-4bbe-4434-845c-c45b85e4e9e4.png)


